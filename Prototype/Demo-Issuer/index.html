<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

  <title>VirtuOhm Anmeldung</title>
  <meta http-equiv="Expires" name="" content="0">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <link href="jquery-bootstrap-combined.css" rel="stylesheet">
  <link href="ohm.css" rel="stylesheet">

  <meta charset="utf-8">

  <!--Credential Handler API Polyfill-->
  <script src="https://unpkg.com/credential-handler-polyfill@2.1.3/dist/credential-handler-polyfill.min.js"></script>
</head>

<body onload="document.defaultForm;">
  <div class="wrapper-ohm">
  <div class="header-ohm hidden-print img-responsive"><div class="headertext-ohm"><small>Sie sind angemeldet als Alice Doe</small></div></div>
  <nav class="navbar navbar-default  navbar-ohm hidden-print" role="navigation">
  <div class="dropdown-ohm dropdown">
        <ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="virtuohm-apps" style="right: 0; left: auto;">
  <li><a>Notenauskunft aktuelles Semester</a></li>
  <li><a>Einschreibung zu Lehrveranstaltungen</a></li>
  <li><a>Praxisstellendatenbank</a></li>
  <li><a>Online-Service für Eingabe des KFZ-Kennzeichens </a></li>
  <li class="selected"><a>VirtuOhm Einstiegsseite</a></li>
  <li><a>Kontaktdatenerfassung COVID-19</a></li>
  </ul></div> 
  <div class="navbar-header">
  <button class="navbar-toggle" data-target="#virtuohm-navbar" data-toggle="collapse" type="button">
                <span class="glyphicon glyphicon-align-justify"></span>
             </button>
  <p class="navbar-text col-xs-9 col-sm-5">VirtuOhm</p></div>
  <div class="navbar-collapse collapse" id="virtuohm-navbar">
            <ul class="nav navbar-nav navbar-right">
  <li><a id="faqPopup" class="popupLink"></span> fragen</a></li>
  <li><a id="infoPopup" class="popupLink"></span> info</a></li>
  <li><a href="javascript:window.print();"></span> drucken</a></li>
  <li><a></span> abmelden</a></li>
  </ul></div>
  </nav>
      <div class="container content-ohm">
  <noscript>
              <div class="alert-ohm alert-ohm-bg-classes alert"><div class="alert-danger">
              <span><strong>Achtung: </strong>JavaScript ist deaktiviert. <strong><a class="text-danger" href="http://enable-javascript.com/de/" target="_blank">Bitte aktivieren Sie JavaScript</a></strong>.</span>
              </div></div></noscript>
  <div class="jumbotron-ohm jumbotron"><div class="container"><div classs="row">
  <h4>Willkommen Frau Alice Doe</h4>
  <div class="modal fade" id="uploadImgModal" tabindex="-1" role="dialog" aria-labelledby="uploadImgModalLabel" aria-hidden="true"></div>
  <div class="modal fade" id="deleteImgModal" tabindex="-1" role="dialog" aria-labelledby="deleteImgModalLabel" aria-hidden="true"></div>
  <div id="imgModalSuccess">
  <div class="col-xs-12 col-sm-4 col-md-2"><div class="profilePhoto">
  <img class="img-thumbnail" src="./img/profilbild.jpg" alt="profile pic">
  </div>
  </div>
  </div>
  <div class="modal fade 
  " id="OHMcardInformationModal" tabindex="-1" role="dialog" aria-labelledby="OHMcardInformationModalLabel" aria-hidden="true">
  <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span class="glyphicon glyphicon-remove hidden-print"></span><span class="sr-only">Schließen</span></button>
          <h4 class="modal-title" id="OHMcardInformationModalLabel">OHMcard Information</h4>
        </div>
        
        <div class="modal-body">
  <div class="alert-ohm alert-ohm-bg-classes alert"><div class="bg-warning">Bitte beachten: Der Text auf Ihrer OHMcard kann eventuell abweichen. Der hier dargestellte Text entspricht der Zeile bei einer Validierung zum aktuellen Zeitpunkt.</div></div>
  <div class="col-xs-12 col-sm-8 col-md-12">
  <dt>Gültigkeitszeile auf Ihrer OHMcard</dt><dd>gültig vom 01.10.2020 bis 30.09.2021</dd>
  <dt>Datum der letzten Validierung</dt><dd>11.03.2020 12:13</dd>
  </div>
  <div class="modal-footer"></div></div></div></div>
  </div>
  <div class="col-xs-12 col-sm-8 col-md-6"><dl class="dl-horizontal">
  <dt>E-Mail-Adresse</dt><dd>doeal12345@th-nuernberg.de</dd>
  <dt>Matrikelnummer</dt><dd>123456</dd>
  <dt>Studiengang</dt><dd>IN7 - Informatik - Bachelor - SPO 2007 (ganz neu)</dd>
  </dl></div>
  <div class="col-xs-12 col-sm-6 col-md-4"><div class="panel panel-default">
  <div class="panel-heading">Downloads</div>
  <ul class="list-group">
  <li class="list-group-item">
  <a id="fachkatalogPopup" class="popupLink">Fächerkatalog auswählen</a>
  </li>
  <li class="list-group-item">
  <a id="study_certificate-torPopup" class="popupLink">Notenübersicht gesamter Studienverlauf</a>
  <div class="infoButton">
                                <a class="popover-details" data-toggle="popover" data-content="Bitte beachten Sie, dass Noten erst dann in dieser Sicht erscheinen, wenn diese vom Studienbüro übernommen wurden."></a>
                               </div>
  </li>
  <li class="list-group-item">
  <span class="inaktive">Studienbescheinigungen</span>
  <div class="infoButton">
                                <a class="popover-details" data-toggle="popover" data-content="Die Studienbescheinigungen finden Sie ab sofort ausschließlich unter Mein Studium -&gt; Bescheinigungen"></a>
                               </div>
  </li>
  <li class="list-group-item">
  <span class="inaktive">Immatrikulationsbescheinigung nach §9 BAföG</span>
  <div class="infoButton">
                                <a class="popover-details" data-toggle="popover" data-content="Die Studienbescheinigungen finden Sie ab sofort ausschließlich unter Mein Studium -&gt; Bescheinigungen"></a>
                               </div>
  </li>
  </ul></div></div>
  </div></div></div>
  <div id="container"><div class="row">
  <div class="col-xs-12 col-md-12">
  <div class="col-xs-12 col-md-6"><div class="list-group">
  <a class="list-group-item virtuohm-item enabled">
  <h4 class="list-group-item-heading">Notenauskunft aktuelles Semester</h4>
  <p class="list-group-item-text">Hier können Sie Ihre Noten aus dem aktuellen Semester einsehen.</p>
  </a><br>
  <a class="list-group-item virtuohm-item enabled">
  <h4 class="list-group-item-heading">Einschreibung zu Lehrveranstaltungen</h4>
  <p class="list-group-item-text">Hier können Sie sich zu Lehrveranstaltungen der Technischen Hochschule Nürnberg Georg Simon Ohm einschreiben.</p>
  </a><br>


  <a class="list-group-item virtuohm-item enabled">
  <h4 class="list-group-item-heading"id="receiveButton" style="cursor: pointer;">Verifiable Credential</h4>
  <p class="list-group-item-text">Hier können Sie ein Credential erhalten, dass aussagt das Sie Student an dieser Hochschule sind</p>
  </a><br>

  </div></div>
  <div class="col-xs-12 col-md-6"><div class="list-group">
  <a class="list-group-item virtuohm-item enabled">
  <h4 class="list-group-item-heading">Praxisstellendatenbank</h4>
  <p class="list-group-item-text">Hier finden Sie fakultätspezifische Praxisstellenangebote.</p>
  </a><br>
  <a class="list-group-item virtuohm-item enabled">
  <h4 class="list-group-item-heading">Online-Service für Eingabe des KFZ-Kennzeichens </h4>
  <p class="list-group-item-text">Hier können Sie Ihr KFZ-Kennzeichen für die Benutzung des Parkhauses in der Bahnhofstraße registrieren.</p>
  </a><br>
  <a class="list-group-item virtuohm-item enabled">
  <h4 class="list-group-item-heading">Kontaktdatenerfassung COVID-19</h4>
  <p class="list-group-item-text">Hier können Sie Ihre Aufenthalte an der Hochschule eingeben für die Kontaktdatenerfassung.</p>
  </a><br>
  </div></div>
  </div></div></div></div>
  <div class="footer-ohm col-md-12 hidden-print" role="contentinfo">
  <div class="container">
            <ul class="nav nav-justified">
  <li><a target="_blank">Studierendenservice</a></li>
  <li><a target="_blank">Rechenzentrum</a></li>
  </ul></div>
   <div class="container">2015, VirtuOhm™-Team, Technische Hochschule Nürnberg. Bei technischen Problemen und Fragen erreichen Sie uns unter <a href="mailto:virtuohm@th-nuernberg.de">VirtuOhm</a>.
        <br>Bitte beachten Sie die <a target="_blank">Datenschutzerklärung</a> der Technischen Hochschule Nürnberg.</div>
                   </div>
                   </div>

<div class="container">
  <div class="card-panel hide" id="resultsPanel">
    <h6>Result of store() operation:</h6>

    <code id="storeResults"></code>
  </div>
</div>
<script>
  const testCredential = {
    "@context": [
      "https://www.w3.org/2018/credentials/v1",
      "https://www.w3.org/2018/credentials/examples/v1"
    ],
    "verifiableCredential": [{
      "@context": [
        "https://www.w3.org/2018/credentials/v1",
        "https://www.w3.org/2018/credentials/examples/v1"
      ],
      "id": "http://example/uniqueIDofTheCredentials/1872",
      "type": ["VerifiableCredential", "UniversityCredential"],
      "issuer": "did:example:university",
      "issuanceDate": "2021-03-01T19:73:24Z",
      "credentialSubject": {
        "id": "did:example:alice",
        "alumniOf": {
          "id": "did:example:university",
          "name": {
            "value": "TH Nürnberg",
          }
        }
      },
      "proof": {
        "type": "RsaSignature2018",
        "created": "2021-03-01T19:73:24Z",
        "verificationMethod": "did:example:university",
        "jws": "eyJhbGciOiJSUziYjY0Il19..TCYt5XsITJX1CxPCT8zS245-krQyHUdBBPM"
      }
    }],
  };
  // ^ Note that:
  // 1. The Verifiable Credential is signed, and wrapped in a VerifiablePresentation.
  // 2. The wrapping VerifiablePresentation is not signed.

  async function onClickReceive() {
    // document.getElementById('storeResults').innerHTML = ''; // clear results

    // Construct the WebCredential wrapper around the credential to be stored
    const credentialType = 'VerifiableCredential';
    const webCredentialWrapper = new WebCredential(credentialType, testCredential);

    //document.getElementById('storeResults').innerText = 'Storing credential...';

    // Use Credential Handler API to store
    const result = await navigator.credentials.store(webCredentialWrapper);

    //document.getElementById('resultsPanel').classList.remove('hide');
    //document.getElementById('storeResults').innerText = JSON.stringify(result, null, 2);

    //console.log('Result of receiving vc:', result);
  }

  function ready(fn) {
    if(document.readyState !== 'loading') {
      fn();
    } else {
      document.addEventListener('DOMContentLoaded', fn);
    }
  }

  ready(() => {
    document.getElementById('receiveButton').addEventListener('click', onClickReceive);
    console.log('Document ready.')
  })

  const MEDIATOR = 'https://authn.io/mediator' + '?origin=' +
    encodeURIComponent(window.location.origin);

  credentialHandlerPolyfill
    .loadOnce(MEDIATOR)
    .then(console.log('Polyfill loaded.'))
    .catch(e => console.error('Error loading polyfill:', e));
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
</body>
</html>
